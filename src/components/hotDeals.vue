
<template>
    <div class="container">
        <b-row class="product-row mt-5">
            <b-col class="new-arrivals" lg="3" sm="12" md="12">
                <span class="sale-text">{{ $t('weekend-sales') }}</span>
                <hr class="weekend-hr">
                <span class="new-title">{{ $t('new-arrival') }}</span>
                <span class="new-title">{{ $t('collections') }}</span>
                <button class="shop-now">
                    {{ $t('shop-now-btn') }}
                </button>
                <img class="new-arrival-img" src="../assets//images/lavendar.png" alt="MaskGroupImage">
                <span class="procduct-name"> {{ $t('fresh-lavander-oil') }}</span>
                <span class="product-price">{{ $t('sale-price') }}$</span>
                <span class="product-desc">
                    Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod
                    tempor invidunt ut
                    labore et dolore
                </span>
                <div class="sm-icons ml-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25.526" height="25.526" viewBox="0 0 25.526 25.526">
                        <path id="Subtraction_1" data-name="Subtraction 1"
                            d="M12.763,25.526A12.763,12.763,0,0,1,3.738,3.738a12.763,12.763,0,1,1,18.05,18.05A12.679,12.679,0,0,1,12.763,25.526ZM8.9,10.79v2.582h2.11v6.5H13.6v-6.5h2.024l.322-2.582H13.6V9.011c0-.754.212-1.257,1.241-1.257h1.326V5.445a17.128,17.128,0,0,0-1.932-.1,3.081,3.081,0,0,0-3.222,3.413V10.79Z"
                            fill="#fff" />
                    </svg>
                    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="25.59" height="25.59" viewBox="0 0 25.59 25.59">
                        <g id="Group_187" data-name="Group 187" transform="translate(0 0)">
                            <path id="Path_420" data-name="Path 420"
                                d="M455.9,453.449A2.449,2.449,0,1,1,453.449,451a2.449,2.449,0,0,1,2.449,2.449Zm0,0"
                                transform="translate(-440.654 -440.654)" fill="#fff" />
                            <path id="Path_421" data-name="Path 421"
                                d="M391.235,381.178a2.433,2.433,0,0,0-1.394-1.394,4.065,4.065,0,0,0-1.364-.253c-.775-.035-1.007-.043-2.969-.043s-2.194.007-2.969.043a4.069,4.069,0,0,0-1.364.253,2.434,2.434,0,0,0-1.395,1.394,4.066,4.066,0,0,0-.253,1.364c-.035.775-.043,1.007-.043,2.969s.008,2.194.043,2.969a4.065,4.065,0,0,0,.253,1.364,2.432,2.432,0,0,0,1.394,1.394,4.059,4.059,0,0,0,1.364.253c.775.035,1.007.043,2.969.043s2.194-.007,2.969-.043a4.059,4.059,0,0,0,1.364-.253,2.433,2.433,0,0,0,1.394-1.394,4.07,4.07,0,0,0,.253-1.364c.035-.775.043-1.007.043-2.969s-.007-2.194-.043-2.969a4.061,4.061,0,0,0-.253-1.364Zm-5.727,8.106a3.773,3.773,0,1,1,3.773-3.773,3.773,3.773,0,0,1-3.773,3.773Zm3.922-6.813a.882.882,0,1,1,.882-.882.882.882,0,0,1-.882.882Zm0,0"
                                transform="translate(-372.712 -372.716)" fill="#fff" />
                            <path id="Path_422" data-name="Path 422"
                                d="M256.8,244a12.8,12.8,0,1,0,12.8,12.8A12.8,12.8,0,0,0,256.8,244Zm7.3,15.824a5.391,5.391,0,0,1-.341,1.784,3.757,3.757,0,0,1-2.149,2.149,5.394,5.394,0,0,1-1.783.341c-.783.036-1.034.044-3.029.044s-2.246-.009-3.029-.044a5.394,5.394,0,0,1-1.783-.341,3.757,3.757,0,0,1-2.149-2.149,5.39,5.39,0,0,1-.341-1.783c-.036-.784-.045-1.034-.045-3.029s.008-2.246.044-3.029a5.39,5.39,0,0,1,.341-1.783,3.759,3.759,0,0,1,2.149-2.149,5.4,5.4,0,0,1,1.783-.341c.783-.036,1.034-.044,3.029-.044s2.246.009,3.029.045a5.4,5.4,0,0,1,1.784.341,3.758,3.758,0,0,1,2.149,2.149,5.39,5.39,0,0,1,.342,1.783c.036.783.044,1.034.044,3.029s-.008,2.246-.044,3.029Zm0,0"
                                transform="translate(-244 -244)" fill="#fff" />
                        </g>
                    </svg> -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="25.59" height="25.59" viewBox="0 0 25.59 25.59">
                        <g id="Group_189" data-name="Group 189" transform="translate(0 0)">
                            <path id="Path_423" data-name="Path 423"
                                d="M256.8,244a12.8,12.8,0,1,0,12.8,12.8A12.8,12.8,0,0,0,256.8,244Zm5.842,9.976q.009.189.008.38a8.3,8.3,0,0,1-8.356,8.356h0a8.313,8.313,0,0,1-4.5-1.319,5.974,5.974,0,0,0,.7.041,5.893,5.893,0,0,0,3.648-1.257,2.94,2.94,0,0,1-2.744-2.04,2.926,2.926,0,0,0,1.326-.05,2.938,2.938,0,0,1-2.356-2.879c0-.013,0-.025,0-.038a2.917,2.917,0,0,0,1.33.367,2.939,2.939,0,0,1-.909-3.921,8.338,8.338,0,0,0,6.054,3.069,2.938,2.938,0,0,1,5-2.678,5.892,5.892,0,0,0,1.865-.713,2.948,2.948,0,0,1-1.292,1.624,5.856,5.856,0,0,0,1.686-.463,5.968,5.968,0,0,1-1.465,1.521Zm0,0"
                                transform="translate(-244 -244)" fill="#fff" />
                        </g>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="25.59" height="25.59" viewBox="0 0 25.59 25.59">
                        <g id="Group_190" data-name="Group 190" transform="translate(0 0)">
                            <path id="Path_424" data-name="Path 424" d="M468.113,456.833l4.162-2.4-4.162-2.4Zm0,0"
                                transform="translate(-456.912 -441.641)" fill="#fff" />
                            <path id="Path_425" data-name="Path 425"
                                d="M256.8,244a12.8,12.8,0,1,0,12.8,12.8A12.8,12.8,0,0,0,256.8,244Zm8,12.808a21.115,21.115,0,0,1-.329,3.846,2,2,0,0,1-1.409,1.409,48.63,48.63,0,0,1-6.256.329,46.892,46.892,0,0,1-6.256-.342,2,2,0,0,1-1.409-1.409,22.62,22.62,0,0,1,0-7.692,2.044,2.044,0,0,1,1.409-1.422,48.628,48.628,0,0,1,6.256-.329,46.793,46.793,0,0,1,6.256.342,2,2,0,0,1,1.409,1.409,20.038,20.038,0,0,1,.329,3.859Zm0,0"
                                transform="translate(-244 -244)" fill="#fff" />
                        </g>
                    </svg>
                </div>
            </b-col>
            <b-col lg="9" sm="4" md="12">
                <b-row>
                    <b-col lg="4" md="6" class="product-col" style="max-width:330px;" v-for="product in paginatedCategory"
                        :key="product._id">
                        <CategoryCard :CategoryProduct="product" />
                    </b-col>
                </b-row>
            </b-col>
            <div style="display: flex; margin-top: 1rem; justify-content: center;" class="pagination">
                <b-pagination style="gap: 1rem; border-radius: 50%;" v-model="currentPage" :total-rows="rows"
                    :per-page="perPage" aria-controls="categories" @change="getPageProducts($event)">
                </b-pagination>
            </div>
        </b-row>
    </div>
</template>
<script>
import CategoryCard from './CategoryCard.vue';
import axios from 'axios';
import { mapActions, mapGetters } from 'vuex';
export default ({
    data() {

        return {
            perPage: 6,
            imageUrl: "",
            currentPage: 1,
            popularcategory: [],
            paginatedCategory: [],

        }
    },

    computed: {
        ...mapGetters("productModule", ['getProducts']),
        rows() {
            return this.getProducts.length;
        },
    },

    mounted() {

        this.imageUrl = process.env.VUE_APP_API_BASE_URL + 'api'
        this.fetchProducts();
        this.getPageProducts(this.currentPage);

    },
    methods: {
        ...mapActions("productModule", ['setApiData']),
        fetchProducts() {
            axios.get(process.env.VUE_APP_API_V1_BASE_URL + "/home/top-products").then(
                (res => {
                    let response = res.data;
                    // this.setApiData(response.data);
                    console.log(response.data, "The Data is fetched Properly")
                    this.getPageProducts(this.currentPage)
                })
            ).catch(error => {
                console.log(error);
                this.error = true;
            })
        },
        getPageProducts(page) {
            let start = (page - 1) * this.perPage;
            let end = start + this.perPage;
            this.paginatedCategory = this.getProducts.slice(start, end);
            console.log(this.popularcategory, "my");
        },

    },

    components: {
        CategoryCard
    }
})
</script>
    
<style scoped>
.product-col {
    justify-content: center;
    width: 370px;
    /* border: 2px solid #8C5E1A0D; */
    border-radius: 18px;
    opacity: 1;
    flex-wrap: wrap;
    /* margin-left: 1rem; */
    margin-bottom: 2rem;
    box-shadow: none;
}

.new-arrivals {
    display: flex;
    background: var(--unnamed-color-729f28) 0% 0% no-repeat padding-box;
    background: #729F28 0% 0% no-repeat padding-box;
    height: fit-content;
    padding: 0px;
    flex-direction: column;

}

.new-arrivalimg {
    width: 100%;
}

.sale-text {
    padding-top: 2rem;
    padding-left: 1.5rem;
    padding-bottom: 0.5rem;
    font: normal normal normal 24px/31px Lobster 1.4;
    letter-spacing: 0px;
    color: #FFFFFF;
    opacity: 1;
}

.new-title {
    padding-left: 1.5rem;
    font-size: 30px;
    letter-spacing: 0px;
    color: #FFFFFF;
    opacity: 1;
}

.shop-now {
    width: 148px;
    height: 48px;
    background: #FFFFFF 0% 0% no-repeat padding-box;
    border-radius: 6px;
    opacity: 1;
    border: none;
    color: #729F28;
    margin-left: 1.5rem;
    margin-top: 1.5rem;
}

.weekend-hr {
    width: 70px;
    border: 3px solid white;
    color: white;
    margin-left: 1.5rem;
    margin-top: 0px;
}

.new-arrival-img {
    margin-top: 1.5rem;
}

.procduct-name {
    font-size: 20px;
    color: white;
    margin-top: 1rem;
    margin-left: 1.5rem;
}

.product-price {
    font-size: 20px;
    color: white;
    margin-left: 1.5rem;
}

.product-desc {
    color: white;
    margin-left: 1.5rem;
}

.sm-icons {
    display: flex;
    gap: 0.5rem;
    margin: 1.5rem;
}





@media only screen and (max-width: 991px) and (min-width: 768px) {
    .row {
        margin-top: 4rem;
    }

    .new-arrival-img {
        margin-top: 1.5rem;
        width: 70%;
    }
}

@media only screen and (max-width: 480px) {
    .row {
        display: flex;
        justify-content: center;
        margin-top: 3rem;
    }

    .new-arrival-img {
        width: 70%;
        margin-left: 1rem;
    }

    .product-row {
        gap: 1rem;
        display: flex;
        justify-content: center;
    }

    .product-row {
        gap: 0rem;
        justify-content: center;
        margin: none;
    }

    .product-col {
        margin-top: 0rem;
        /* width: 179px; */
        opacity: 1;
    }
}
</style>
    